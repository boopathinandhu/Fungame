<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grammar Snake Stable</title>
<style>
body{
margin:0;
background:#0a0a0a;
color:white;
font-family:Arial;
text-align:center;
}
canvas{
background:black;
display:block;
margin:auto;
border:4px solid lime;
}
#info{
background:#111;
padding:10px;
}
.controls{
margin-top:10px;
}
button{
padding:12px 18px;
margin:5px;
font-size:18px;
border:none;
border-radius:8px;
}
.arrow{
width:70px;
height:70px;
font-size:26px;
}
.pauseBtn{
background:orange;
color:black;
}
</style>
</head>
<body>

<h2>üêç Grammar Snake</h2>
<canvas id="game" width="400" height="400"></canvas>

<div id="info">
<p id="levelText">Level 1</p>
<p id="scoreText">Score: 0</p>
<p><b>Correct Sentence:</b> <span id="sentence"></span></p>
<p><b>Tamil Meaning:</b> <span id="meaning"></span></p>
</div>

<div class="controls">
<button class="arrow" onclick="changeDir('up')">‚¨Ü</button><br>
<button class="arrow" onclick="changeDir('left')">‚¨Ö</button>
<button class="arrow" onclick="changeDir('down')">‚¨á</button>
<button class="arrow" onclick="changeDir('right')">‚û°</button>
<br>
<button class="pauseBtn" onclick="togglePause()" id="pauseBtn">‚è∏ Pause</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let box=20;
let snake=[{x:200,y:200}];
let dir="right";
let speed=250; // slower speed
let gameInterval;
let paused=false;

let score=0;
let completed=0;
let level=1;

let wordObjects=[];
let correctOrder=[];
let currentIndex=0;

const levels={
1:{
name:"Tenses",
data:[
{sentence:"She is playing football",tamil:"‡ÆÖ‡Æµ‡Æ≥‡Øç ‡Æï‡Ææ‡Æ≤‡Øç‡Æ™‡Æ®‡Øç‡Æ§‡ØÅ ‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Ææ‡Æ≥‡Øç"},
{sentence:"They went to school",tamil:"‡ÆÖ‡Æµ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡Æö‡ØÜ‡Æ©‡Øç‡Æ±‡Ææ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç"},
{sentence:"I will visit Chennai",tamil:"‡Æ®‡Ææ‡Æ©‡Øç ‡Æö‡ØÜ‡Æ©‡Øç‡Æ©‡Øà ‡Æö‡ØÜ‡Æ≤‡Øç‡Æµ‡Øá‡Æ©‡Øç"}
]
},
2:{
name:"Passive Voice",
data:[
{sentence:"The ball was kicked by him",tamil:"‡Æ™‡Æ®‡Øç‡Æ§‡ØÅ ‡ÆÖ‡Æµ‡Æ©‡Ææ‡Æ≤‡Øç ‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ"},
{sentence:"The cake was eaten by them",tamil:"‡Æï‡Øá‡Æï‡Øç ‡ÆÖ‡Æµ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç ‡Æö‡Ææ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ"},
{sentence:"A letter was written by her",tamil:"‡Æï‡Æü‡Æø‡Æ§‡ÆÆ‡Øç ‡ÆÖ‡Æµ‡Æ≥‡Ææ‡Æ≤‡Øç ‡Æé‡Æ¥‡ØÅ‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ"}
]
}
};

function shuffle(a){
for(let i=a.length-1;i>0;i--){
let j=Math.floor(Math.random()*(i+1));
[a[i],a[j]]=[a[j],a[i]];
}
}

function newSentence(){
let list=levels[level].data;
let random=list[Math.floor(Math.random()*list.length)];

correctOrder=random.sentence.split(" ");
let words=[...correctOrder];
shuffle(words);

wordObjects=[];
words.forEach(w=>{
wordObjects.push({
text:w,
x:Math.floor(Math.random()*20)*box,
y:Math.floor(Math.random()*20)*box
});
});

currentIndex=0;
document.getElementById("sentence").innerText=random.sentence;
document.getElementById("meaning").innerText=random.tamil;
document.getElementById("levelText").innerText="Level "+level+" : "+levels[level].name;
}

function speak(word){
let u=new SpeechSynthesisUtterance(word);
u.lang="en-US";
speechSynthesis.speak(u);
}

function draw(){
ctx.clearRect(0,0,400,400);

snake.forEach((s,i)=>{
ctx.fillStyle=i==0?"#00ff00":"#008000";
ctx.fillRect(s.x,s.y,box,box);
});

wordObjects.forEach(obj=>{
ctx.fillStyle="red";
ctx.fillRect(obj.x,obj.y,box,box);
ctx.fillStyle="white";
ctx.font="10px Arial";
ctx.fillText(obj.text,obj.x+1,obj.y+15);
});

let head={x:snake[0].x,y:snake[0].y};

if(dir=="right") head.x+=box;
if(dir=="left") head.x-=box;
if(dir=="up") head.y-=box;
if(dir=="down") head.y+=box;

for(let i=0;i<wordObjects.length;i++){
if(head.x==wordObjects[i].x && head.y==wordObjects[i].y){

if(wordObjects[i].text==correctOrder[currentIndex]){
speak(wordObjects[i].text);
snake.push({});
currentIndex++;
wordObjects.splice(i,1);

if(currentIndex==correctOrder.length){
score++;
completed++;
document.getElementById("scoreText").innerText="Score: "+score;

if(completed>=3){
level++;
completed=0;
if(!levels[level]){
alert("üèÜ All Levels Completed!");
return;
}
}

newSentence();
}
}else{
alert("‚ùå Wrong Word!");
resetGame();
}
}
}

snake.pop();
snake.unshift(head);

if(head.x<0||head.y<0||head.x>=400||head.y>=400){
resetGame();
}
}

function changeDir(d){
dir=d;
}

function togglePause(){
if(paused){
gameInterval=setInterval(draw,speed);
document.getElementById("pauseBtn").innerText="‚è∏ Pause";
paused=false;
}else{
clearInterval(gameInterval);
document.getElementById("pauseBtn").innerText="‚ñ∂ Resume";
paused=true;
}
}

function resetGame(){
snake=[{x:200,y:200}];
score=0;
completed=0;
document.getElementById("scoreText").innerText="Score: 0";
newSentence();
}

newSentence();
gameInterval=setInterval(draw,speed);
</script>

</body>
</html>
