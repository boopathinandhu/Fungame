<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Snake</title>
<style>
body {
  background: linear-gradient(135deg,#111,#222);
  text-align: center;
  font-family: Arial;
  color: white;
  margin: 0;
}

canvas {
  background: #000;
  border: 3px solid lime;
  display: block;
  margin: auto;
}

#info {
  margin: 10px;
  font-size: 18px;
}

button {
  padding: 8px 15px;
  margin: 5px;
  border: none;
  background: lime;
  font-weight: bold;
  cursor: pointer;
}

.controls {
  margin-top: 15px;
}

.arrow {
  width: 60px;
  height: 60px;
  font-size: 22px;
  margin: 5px;
}
</style>
</head>
<body>

<h2>üêç Advanced Snake</h2>
<div id="info">
Score: <span id="score">0</span> |
High Score: <span id="high">0</span>
</div>

<canvas id="game" width="350" height="350"></canvas>

<div>
<button onclick="togglePause()">Pause / Resume</button>
<button onclick="restart()">Restart</button>
</div>

<div class="controls">
  <div>
    <button class="arrow" onclick="setDir('UP')">‚Üë</button>
  </div>
  <div>
    <button class="arrow" onclick="setDir('LEFT')">‚Üê</button>
    <button class="arrow" onclick="setDir('DOWN')">‚Üì</button>
    <button class="arrow" onclick="setDir('RIGHT')">‚Üí</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const box = 15;
let snake, direction, food, score, speed, gameInterval;
let paused = false;

let highScore = localStorage.getItem("snakeHigh") || 0;
document.getElementById("high").innerText = highScore;

function init() {
  snake = [{x: 10*box, y: 10*box}];
  direction = "RIGHT";
  food = randomFood();
  score = 0;
  speed = 120;
  document.getElementById("score").innerText = score;
  startGame();
}

function randomFood() {
  return {
    x: Math.floor(Math.random()*(canvas.width/box))*box,
    y: Math.floor(Math.random()*(canvas.height/box))*box
  };
}

function setDir(dir){
  if(dir==="LEFT" && direction!=="RIGHT") direction="LEFT";
  if(dir==="UP" && direction!=="DOWN") direction="UP";
  if(dir==="RIGHT" && direction!=="LEFT") direction="RIGHT";
  if(dir==="DOWN" && direction!=="UP") direction="DOWN";
}

document.addEventListener("keydown", e=>{
  if(e.key==="ArrowLeft") setDir("LEFT");
  if(e.key==="ArrowUp") setDir("UP");
  if(e.key==="ArrowRight") setDir("RIGHT");
  if(e.key==="ArrowDown") setDir("DOWN");
});

function draw(){
  if(paused) return;

  ctx.fillStyle="black";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=0;i<snake.length;i++){
    ctx.fillStyle = i===0?"lime":"green";
    ctx.fillRect(snake[i].x,snake[i].y,box,box);
  }

  ctx.fillStyle="red";
  ctx.fillRect(food.x,food.y,box,box);

  let headX=snake[0].x;
  let headY=snake[0].y;

  if(direction==="LEFT") headX-=box;
  if(direction==="UP") headY-=box;
  if(direction==="RIGHT") headX+=box;
  if(direction==="DOWN") headY+=box;

  if(headX<0 || headY<0 || headX>=canvas.width || headY>=canvas.height || collision(headX,headY)){
    gameOver();
    return;
  }

  let newHead={x:headX,y:headY};

  if(headX===food.x && headY===food.y){
    score++;
    document.getElementById("score").innerText=score;

    if(score%5===0 && speed>60){
      speed-=10;
      restartInterval();
    }

    food=randomFood();
    beep();
  } else {
    snake.pop();
  }

  snake.unshift(newHead);
}

function collision(x,y){
  for(let i=0;i<snake.length;i++){
    if(x===snake[i].x && y===snake[i].y) return true;
  }
  return false;
}

function gameOver(){
  if(score>highScore){
    highScore=score;
    localStorage.setItem("snakeHigh",highScore);
    document.getElementById("high").innerText=highScore;
  }
  alert("Game Over! Score: "+score);
  restart();
}

function startGame(){
  gameInterval=setInterval(draw,speed);
}

function restartInterval(){
  clearInterval(gameInterval);
  gameInterval=setInterval(draw,speed);
}

function togglePause(){
  paused=!paused;
}

function restart(){
  clearInterval(gameInterval);
  init();
}

function beep(){
  let audio=new AudioContext();
  let osc=audio.createOscillator();
  osc.type="square";
  osc.frequency.value=400;
  osc.connect(audio.destination);
  osc.start();
  osc.stop(audio.currentTime+0.1);
}

init();
</script>

</body>
</html>
