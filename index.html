<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Egg Game</title>

<style>
body{
  background:#9bbc0f;
  text-align:center;
  font-family:monospace;
  margin:0;
}

#scoreboard{
  font-size:18px;
  padding:10px;
  color:#0f380f;
  font-weight:bold;
}

canvas{
  background:#8bac0f;
  border:8px solid #306230;
  display:block;
  margin:auto;
}

.controls{
  margin-top:15px;
}

.btn{
  width:60px;
  height:60px;
  font-size:22px;
  margin:5px;
  border-radius:10px;
  border:none;
  background:#306230;
  color:white;
}
</style>
</head>

<body>

<div id="scoreboard">
Score: <span id="score">0</span> |
High: <span id="high">0</span>
</div>

<canvas id="game" width="320" height="320"></canvas>

<div class="controls">
  <div>
    <button class="btn" onclick="setDir('UP')">↑</button>
  </div>
  <div>
    <button class="btn" onclick="setDir('LEFT')">←</button>
    <button class="btn" onclick="setDir('DOWN')">↓</button>
    <button class="btn" onclick="setDir('RIGHT')">→</button>
  </div>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const box=16;
let snake,dir,egg,score,speed,interval;
let high=localStorage.getItem("snakeHigh")||0;
document.getElementById("high").innerText=high;

function init(){
  snake=[{x:8*box,y:8*box}];
  dir="RIGHT";
  egg=randomEgg();
  score=0;
  speed=120;
  document.getElementById("score").innerText=score;
  start();
}

function randomEgg(){
  return{
    x:Math.floor(Math.random()*(canvas.width/box))*box,
    y:Math.floor(Math.random()*(canvas.height/box))*box
  }
}

function setDir(d){
  if(d==="LEFT"&&dir!=="RIGHT") dir="LEFT";
  if(d==="UP"&&dir!=="DOWN") dir="UP";
  if(d==="RIGHT"&&dir!=="LEFT") dir="RIGHT";
  if(d==="DOWN"&&dir!=="UP") dir="DOWN";
}

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") setDir("LEFT");
  if(e.key==="ArrowUp") setDir("UP");
  if(e.key==="ArrowRight") setDir("RIGHT");
  if(e.key==="ArrowDown") setDir("DOWN");
});

function drawSnake(){
  for(let i=0;i<snake.length;i++){
    ctx.fillStyle="#0f380f";
    ctx.beginPath();
    ctx.arc(
      snake[i].x+box/2,
      snake[i].y+box/2,
      box/2-1,
      0,
      Math.PI*2
    );
    ctx.fill();

    // Snake eyes (only for head)
    if(i===0){
      ctx.fillStyle="white";
      ctx.beginPath();
      ctx.arc(snake[i].x+5,snake[i].y+5,2,0,Math.PI*2);
      ctx.arc(snake[i].x+11,snake[i].y+5,2,0,Math.PI*2);
      ctx.fill();
    }
  }
}

function drawEgg(){
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.ellipse(
    egg.x+box/2,
    egg.y+box/2,
    box/2-2,
    box/2-4,
    0,0,Math.PI*2
  );
  ctx.fill();
}

function gameLoop(){
  ctx.fillStyle="#8bac0f";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  drawSnake();
  drawEgg();

  let headX=snake[0].x;
  let headY=snake[0].y;

  if(dir==="LEFT") headX-=box;
  if(dir==="UP") headY-=box;
  if(dir==="RIGHT") headX+=box;
  if(dir==="DOWN") headY+=box;

  if(headX<0||headY<0||
     headX>=canvas.width||headY>=canvas.height||
     collision(headX,headY)){
      gameOver();
      return;
  }

  let newHead={x:headX,y:headY};

  if(headX===egg.x&&headY===egg.y){
    score++;
    document.getElementById("score").innerText=score;

    if(score%5===0&&speed>60){
      speed-=10;
      restartSpeed();
    }

    egg=randomEgg();
  }else{
    snake.pop();
  }

  snake.unshift(newHead);
}

function collision(x,y){
  for(let i=0;i<snake.length;i++){
    if(x===snake[i].x&&y===snake[i].y) return true;
  }
  return false;
}

function gameOver(){
  if(score>high){
    high=score;
    localStorage.setItem("snakeHigh",high);
    document.getElementById("high").innerText=high;
  }
  alert("Game Over! Score: "+score);
  clearInterval(interval);
  init();
}

function start(){
  interval=setInterval(gameLoop,speed);
}

function restartSpeed(){
  clearInterval(interval);
  interval=setInterval(gameLoop,speed);
}

init();
</script>

</body>
</html>
